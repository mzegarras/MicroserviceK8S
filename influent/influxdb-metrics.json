{
__inputs: [
{
name: "DS_INTERNAL_INFLUXDB",
label: "internal influxdb",
description: "_internal influxdb database",
type: "datasource",
pluginId: "influxdb",
pluginName: "InfluxDB"
}
],
__requires: [
{
type: "panel",
id: "graph",
name: "Graph",
version: ""
},
{
type: "grafana",
id: "grafana",
name: "Grafana",
version: "3.1.1"
},
{
type: "datasource",
id: "influxdb",
name: "InfluxDB",
version: "1.0.0"
}
],
id: null,
title: "InfluxDB Metrics",
description: "metrics on influxdb from telegraf",
tags: [
"influxdb"
],
style: "dark",
timezone: "browser",
editable: true,
hideControls: false,
sharedCrosshair: false,
rows: [
{
collapse: false,
editable: true,
height: "250px",
panels: [
{
aliasColors: { },
bars: false,
datasource: "${DS_INTERNAL_INFLUXDB}",
editable: true,
error: false,
fill: 1,
grid: {
threshold1: null,
threshold1Color: "rgba(216, 200, 27, 0.27)",
threshold2: null,
threshold2Color: "rgba(234, 112, 112, 0.22)"
},
id: 1,
isNew: true,
legend: {
alignAsTable: true,
avg: false,
current: false,
max: false,
min: false,
rightSide: true,
show: false,
total: false,
values: false
},
lines: true,
linewidth: 2,
links: [ ],
nullPointMode: "null",
percentage: false,
pointradius: 5,
points: false,
renderer: "flot",
seriesOverrides: [ ],
span: 12,
stack: false,
steppedLine: false,
targets: [
{
alias: "$tag_host",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"host"
],
type: "tag"
},
{
params: [
"null"
],
type: "fill"
}
],
measurement: "httpd",
policy: "default",
query: "SELECT non_negative_derivative(last("queryReq"), 1s) FROM "influxdb_httpd" WHERE $timeFilter GROUP BY time($interval), "host" fill(null)",
refId: "A",
resultFormat: "time_series",
select: [
[
{
params: [
"queryReq"
],
type: "field"
},
{
params: [ ],
type: "last"
},
{
params: [
"1s"
],
type: "non_negative_derivative"
}
]
],
tags: [ ]
},
{
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"null"
],
type: "fill"
}
],
policy: "default",
refId: "B",
resultFormat: "time_series",
select: [
[
{
params: [
"value"
],
type: "field"
},
{
params: [ ],
type: "mean"
}
]
],
tags: [ ]
}
],
timeFrom: null,
timeShift: null,
title: "HTTP Queries",
tooltip: {
msResolution: false,
shared: true,
sort: 0,
value_type: "cumulative"
},
type: "graph",
xaxis: {
show: true
},
yaxes: [
{
format: "ops",
logBase: 1,
max: null,
min: null,
show: true
},
{
format: "short",
logBase: 1,
max: null,
min: null,
show: true
}
]
},
{
aliasColors: { },
bars: false,
datasource: "${DS_INTERNAL_INFLUXDB}",
editable: true,
error: false,
fill: 1,
grid: {
threshold1: null,
threshold1Color: "rgba(216, 200, 27, 0.27)",
threshold2: null,
threshold2Color: "rgba(234, 112, 112, 0.22)"
},
id: 2,
isNew: true,
legend: {
alignAsTable: true,
avg: false,
current: false,
max: false,
min: false,
rightSide: true,
show: true,
total: false,
values: false
},
lines: true,
linewidth: 2,
links: [ ],
nullPointMode: "null",
percentage: false,
pointradius: 5,
points: false,
renderer: "flot",
seriesOverrides: [ ],
span: 12,
stack: false,
steppedLine: false,
targets: [
{
alias: "Client Errors",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"host"
],
type: "tag"
},
{
params: [
"null"
],
type: "fill"
}
],
measurement: "httpd",
policy: "default",
query: "SELECT non_negative_derivative(last("queryReq"), 1s) FROM "influxdb_httpd" WHERE $timeFilter GROUP BY time($interval), "host" fill(null)",
refId: "A",
resultFormat: "time_series",
select: [
[
{
params: [
"clientError"
],
type: "field"
},
{
params: [ ],
type: "last"
},
{
params: [
"1s"
],
type: "non_negative_derivative"
}
]
],
tags: [ ]
},
{
alias: "Server Errors",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"host"
],
type: "tag"
},
{
params: [
"null"
],
type: "fill"
}
],
measurement: "httpd",
policy: "default",
query: "SELECT non_negative_derivative(last("queryReq"), 1s) FROM "influxdb_httpd" WHERE $timeFilter GROUP BY time($interval), "host" fill(null)",
refId: "B",
resultFormat: "time_series",
select: [
[
{
params: [
"serverError"
],
type: "field"
},
{
params: [ ],
type: "last"
},
{
params: [
"1s"
],
type: "non_negative_derivative"
}
]
],
tags: [ ]
}
],
timeFrom: null,
timeShift: null,
title: "HTTP Errors",
tooltip: {
msResolution: false,
shared: true,
sort: 0,
value_type: "cumulative"
},
type: "graph",
xaxis: {
show: true
},
yaxes: [
{
format: "ops",
logBase: 1,
max: null,
min: null,
show: true
},
{
format: "short",
logBase: 1,
max: null,
min: null,
show: true
}
]
},
{
aliasColors: { },
bars: false,
datasource: "${DS_INTERNAL_INFLUXDB}",
editable: true,
error: false,
fill: 1,
grid: {
threshold1: null,
threshold1Color: "rgba(216, 200, 27, 0.27)",
threshold2: null,
threshold2Color: "rgba(234, 112, 112, 0.22)"
},
id: 3,
isNew: true,
legend: {
alignAsTable: true,
avg: false,
current: false,
max: false,
min: false,
rightSide: true,
show: true,
total: false,
values: false
},
lines: true,
linewidth: 2,
links: [ ],
nullPointMode: "null",
percentage: false,
pointradius: 5,
points: false,
renderer: "flot",
seriesOverrides: [ ],
span: 12,
stack: false,
steppedLine: false,
targets: [
{
alias: "Write Fail",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"host"
],
type: "tag"
},
{
params: [
"null"
],
type: "fill"
}
],
measurement: "httpd",
policy: "default",
query: "SELECT non_negative_derivative(last("queryReq"), 1s) FROM "influxdb_httpd" WHERE $timeFilter GROUP BY time($interval), "host" fill(null)",
refId: "A",
resultFormat: "time_series",
select: [
[
{
params: [
"pointsWrittenFail"
],
type: "field"
},
{
params: [ ],
type: "last"
},
{
params: [
"1s"
],
type: "non_negative_derivative"
}
]
],
tags: [ ]
},
{
alias: "Write OK",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"host"
],
type: "tag"
},
{
params: [
"null"
],
type: "fill"
}
],
measurement: "httpd",
policy: "default",
query: "SELECT non_negative_derivative(last("queryReq"), 1s) FROM "influxdb_httpd" WHERE $timeFilter GROUP BY time($interval), "host" fill(null)",
refId: "B",
resultFormat: "time_series",
select: [
[
{
params: [
"pointsWrittenOK"
],
type: "field"
},
{
params: [ ],
type: "last"
},
{
params: [
"1s"
],
type: "non_negative_derivative"
}
]
],
tags: [ ]
}
],
timeFrom: null,
timeShift: null,
title: "Points",
tooltip: {
msResolution: false,
shared: true,
sort: 0,
value_type: "cumulative"
},
type: "graph",
xaxis: {
show: true
},
yaxes: [
{
format: "ops",
logBase: 1,
max: null,
min: null,
show: true
},
{
format: "short",
logBase: 1,
max: null,
min: null,
show: true
}
]
}
],
showTitle: true,
title: "HTTP"
},
{
collapse: false,
editable: true,
height: "250px",
panels: [
{
aliasColors: { },
bars: false,
datasource: "${DS_INTERNAL_INFLUXDB}",
editable: true,
error: false,
fill: 1,
grid: {
threshold1: null,
threshold1Color: "rgba(216, 200, 27, 0.27)",
threshold2: null,
threshold2Color: "rgba(234, 112, 112, 0.22)"
},
id: 4,
isNew: true,
legend: {
avg: false,
current: false,
max: false,
min: false,
show: true,
total: false,
values: false
},
lines: true,
linewidth: 2,
links: [ ],
nullPointMode: "connected",
percentage: false,
pointradius: 5,
points: false,
renderer: "flot",
seriesOverrides: [ ],
span: 6,
stack: false,
steppedLine: false,
targets: [
{
alias: "Number of Series",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"null"
],
type: "fill"
}
],
measurement: "database",
policy: "default",
refId: "A",
resultFormat: "time_series",
select: [
[
{
params: [
"numSeries"
],
type: "field"
},
{
params: [ ],
type: "mean"
}
]
],
tags: [ ]
}
],
timeFrom: null,
timeShift: null,
title: "Number of Series",
tooltip: {
msResolution: true,
shared: true,
sort: 0,
value_type: "cumulative"
},
type: "graph",
xaxis: {
show: true
},
yaxes: [
{
format: "short",
label: null,
logBase: 1,
max: null,
min: null,
show: true
},
{
format: "short",
label: null,
logBase: 1,
max: null,
min: null,
show: true
}
]
},
{
aliasColors: { },
bars: false,
datasource: "${DS_INTERNAL_INFLUXDB}",
editable: true,
error: false,
fill: 1,
grid: {
threshold1: null,
threshold1Color: "rgba(216, 200, 27, 0.27)",
threshold2: null,
threshold2Color: "rgba(234, 112, 112, 0.22)"
},
id: 5,
isNew: true,
legend: {
avg: false,
current: false,
max: false,
min: false,
show: true,
total: false,
values: false
},
lines: true,
linewidth: 2,
links: [ ],
nullPointMode: "connected",
percentage: false,
pointradius: 5,
points: false,
renderer: "flot",
seriesOverrides: [ ],
span: 6,
stack: false,
steppedLine: false,
targets: [
{
alias: "Number of Measurements",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"null"
],
type: "fill"
}
],
policy: "default",
query: "SELECT mean("numMeasurements") FROM "database" WHERE $timeFilter GROUP BY time($interval) fill(null)",
rawQuery: true,
refId: "A",
resultFormat: "time_series",
select: [
[
{
params: [
"value"
],
type: "field"
},
{
params: [ ],
type: "mean"
}
]
],
tags: [ ]
}
],
timeFrom: null,
timeShift: null,
title: "Number of Measurements",
tooltip: {
msResolution: true,
shared: true,
sort: 0,
value_type: "cumulative"
},
transparent: false,
type: "graph",
xaxis: {
show: true
},
yaxes: [
{
format: "short",
label: null,
logBase: 1,
max: null,
min: null,
show: true
},
{
format: "short",
label: null,
logBase: 1,
max: null,
min: null,
show: true
}
]
}
],
showTitle: true,
title: "Database"
},
{
collapse: false,
editable: true,
height: "250px",
panels: [
{
aliasColors: { },
bars: false,
datasource: "${DS_INTERNAL_INFLUXDB}",
editable: true,
error: false,
fill: 1,
grid: {
threshold1: null,
threshold1Color: "rgba(216, 200, 27, 0.27)",
threshold2: null,
threshold2Color: "rgba(234, 112, 112, 0.22)"
},
id: 6,
isNew: true,
legend: {
avg: false,
current: false,
max: false,
min: false,
show: true,
total: false,
values: false
},
lines: true,
linewidth: 2,
links: [ ],
nullPointMode: "connected",
percentage: false,
pointradius: 5,
points: false,
renderer: "flot",
seriesOverrides: [ ],
span: 12,
stack: false,
steppedLine: false,
targets: [
{
alias: "sys",
dsType: "influxdb",
groupBy: [
{
params: [
"$interval"
],
type: "time"
},
{
params: [
"null"
],
type: "fill"
}
],
measurement: "runtime",
policy: "default",
query: "SELECT mean("TotalAlloc")/1024 FROM "runtime" WHERE $timeFilter GROUP BY time($interval) fill(null)",
rawQuery: false,
refId: "A",
resultFormat: "time_series",
select: [
[
{
params: [
"Sys"
],
type: "field"
},
{
params: [ ],
type: "mean"
}
]
],
tags: [ ]
}
],
timeFrom: null,
timeShift: null,
title: "Memory",
tooltip: {
msResolution: true,
shared: true,
sort: 0,
value_type: "cumulative"
},
type: "graph",
xaxis: {
show: true
},
yaxes: [
{
format: "bytes",
label: null,
logBase: 1,
max: null,
min: null,
show: true
},
{
format: "short",
label: null,
logBase: 1,
max: null,
min: null,
show: true
}
]
}
],
showTitle: true,
title: "Memory"
}
],
time: {
from: "now-7d",
to: "now"
},
timepicker: {
now: true,
refresh_intervals: [
"5s",
"10s",
"30s",
"1m",
"5m",
"15m",
"30m",
"1h",
"2h",
"1d"
],
time_options: [
"5m",
"15m",
"1h",
"6h",
"12h",
"24h",
"2d",
"7d",
"30d"
]
},
templating: {
list: [
{
type: "datasource",
datasource: null,
refresh: 1,
name: "datasource",
hide: 0,
options: [
{
text: "internal influxdb",
value: "internal influxdb",
selected: true
}
],
includeAll: false,
multi: false,
query: "influxdb",
regex: "/.*internal.*/",
current: {
text: "internal influxdb",
value: "internal influxdb"
}
}
]
},
annotations: {
list: [ ]
},
schemaVersion: 12,
version: 3,
links: [
{
icon: "external link",
tags: [ ],
title: "Docs",
tooltip: "documentation for metrics",
type: "link",
url: "https://github.com/influxdata/telegraf/tree/master/plugins/inputs/influxdb"
},
{
icon: "external link",
tags: [ ],
title: "Dashboard",
tooltip: "grafana.net dashboard",
type: "link",
url: "https://grafana.net/users/sstarcher/dashboards"
}
],
gnetId: 317
}